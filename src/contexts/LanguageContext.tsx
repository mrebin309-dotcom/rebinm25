import { createContext, useContext, useState, useEffect, ReactNode } from 'react';

type Language = 'en' | 'es' | 'fr' | 'de' | 'zh' | 'ar' | 'ku';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const translations: Record<Language, Record<string, string>> = {
  en: {
    'app.title': 'Inventory Management System',
    'nav.dashboard': 'Dashboard',
    'nav.products': 'Products',
    'nav.sales': 'Sales',
    'nav.returns': 'Returns',
    'nav.reports': 'Reports',
    'nav.advancedReports': 'Advanced Reports',
    'nav.sellers': 'Seller Reports',
    'nav.users': 'Users',
    'nav.mobile': 'Mobile Sync',
    'nav.settings': 'Settings',
    'nav.notifications': 'Notifications',
    'auth.login': 'Login',
    'auth.logout': 'Logout',
    'auth.signup': 'Sign Up',
    'auth.email': 'Email',
    'auth.password': 'Password',
    'common.add': 'Add',
    'common.edit': 'Edit',
    'common.delete': 'Delete',
    'common.save': 'Save',
    'common.cancel': 'Cancel',
    'common.search': 'Search',
    'common.filter': 'Filter',
    'common.export': 'Export',
    'common.import': 'Import',
    'common.loading': 'Loading...',
    'common.noData': 'No data available',
    'product.name': 'Product Name',
    'product.sku': 'SKU',
    'product.price': 'Price',
    'product.cost': 'Cost',
    'product.stock': 'Stock',
    'product.category': 'Category',
    'product.addProduct': 'Add Product',
    'product.editProduct': 'Edit Product',
    'sale.recordSale': 'Record Sale',
    'sale.customer': 'Customer',
    'sale.total': 'Total',
    'sale.date': 'Date',
    'dashboard.totalRevenue': 'Total Revenue',
    'dashboard.totalSales': 'Total Sales',
    'dashboard.lowStock': 'Low Stock Items',
    'dashboard.outOfStock': 'Out of Stock',
  },
  es: {
    'app.title': 'Sistema de GestiÃ³n de Inventario',
    'nav.dashboard': 'Panel',
    'nav.products': 'Productos',
    'nav.sales': 'Ventas',
    'nav.returns': 'Devoluciones',
    'nav.reports': 'Informes',
    'nav.advancedReports': 'Informes Avanzados',
    'nav.sellers': 'Informes de Vendedores',
    'nav.users': 'Usuarios',
    'nav.mobile': 'SincronizaciÃ³n MÃ³vil',
    'nav.settings': 'ConfiguraciÃ³n',
    'nav.notifications': 'Notificaciones',
    'auth.login': 'Iniciar SesiÃ³n',
    'auth.logout': 'Cerrar SesiÃ³n',
    'auth.signup': 'Registrarse',
    'auth.email': 'Correo ElectrÃ³nico',
    'auth.password': 'ContraseÃ±a',
    'common.add': 'Agregar',
    'common.edit': 'Editar',
    'common.delete': 'Eliminar',
    'common.save': 'Guardar',
    'common.cancel': 'Cancelar',
    'common.search': 'Buscar',
    'common.filter': 'Filtrar',
    'common.export': 'Exportar',
    'common.import': 'Importar',
    'common.loading': 'Cargando...',
    'common.noData': 'No hay datos disponibles',
    'product.name': 'Nombre del Producto',
    'product.sku': 'SKU',
    'product.price': 'Precio',
    'product.cost': 'Costo',
    'product.stock': 'Inventario',
    'product.category': 'CategorÃ­a',
    'product.addProduct': 'Agregar Producto',
    'product.editProduct': 'Editar Producto',
    'sale.recordSale': 'Registrar Venta',
    'sale.customer': 'Cliente',
    'sale.total': 'Total',
    'sale.date': 'Fecha',
    'dashboard.totalRevenue': 'Ingresos Totales',
    'dashboard.totalSales': 'Ventas Totales',
    'dashboard.lowStock': 'ArtÃ­culos con Bajo Inventario',
    'dashboard.outOfStock': 'Sin Existencias',
  },
  fr: {
    'app.title': 'SystÃ¨me de Gestion des Stocks',
    'nav.dashboard': 'Tableau de Bord',
    'nav.products': 'Produits',
    'nav.sales': 'Ventes',
    'nav.returns': 'Retours',
    'nav.reports': 'Rapports',
    'nav.advancedReports': 'Rapports AvancÃ©s',
    'nav.sellers': 'Rapports des Vendeurs',
    'nav.users': 'Utilisateurs',
    'nav.mobile': 'Synchronisation Mobile',
    'nav.settings': 'ParamÃ¨tres',
    'nav.notifications': 'Notifications',
    'auth.login': 'Connexion',
    'auth.logout': 'DÃ©connexion',
    'auth.signup': "S'inscrire",
    'auth.email': 'Email',
    'auth.password': 'Mot de Passe',
    'common.add': 'Ajouter',
    'common.edit': 'Modifier',
    'common.delete': 'Supprimer',
    'common.save': 'Enregistrer',
    'common.cancel': 'Annuler',
    'common.search': 'Rechercher',
    'common.filter': 'Filtrer',
    'common.export': 'Exporter',
    'common.import': 'Importer',
    'common.loading': 'Chargement...',
    'common.noData': 'Aucune donnÃ©e disponible',
    'product.name': 'Nom du Produit',
    'product.sku': 'SKU',
    'product.price': 'Prix',
    'product.cost': 'CoÃ»t',
    'product.stock': 'Stock',
    'product.category': 'CatÃ©gorie',
    'product.addProduct': 'Ajouter un Produit',
    'product.editProduct': 'Modifier le Produit',
    'sale.recordSale': 'Enregistrer une Vente',
    'sale.customer': 'Client',
    'sale.total': 'Total',
    'sale.date': 'Date',
    'dashboard.totalRevenue': 'Revenu Total',
    'dashboard.totalSales': 'Ventes Totales',
    'dashboard.lowStock': 'Articles en Rupture',
    'dashboard.outOfStock': 'Rupture de Stock',
  },
  de: {
    'app.title': 'Lagerverwaltungssystem',
    'nav.dashboard': 'Dashboard',
    'nav.products': 'Produkte',
    'nav.sales': 'VerkÃ¤ufe',
    'nav.returns': 'RÃ¼cksendungen',
    'nav.reports': 'Berichte',
    'nav.advancedReports': 'Erweiterte Berichte',
    'nav.sellers': 'VerkÃ¤uferberichte',
    'nav.users': 'Benutzer',
    'nav.mobile': 'Mobile Synchronisation',
    'nav.settings': 'Einstellungen',
    'nav.notifications': 'Benachrichtigungen',
    'auth.login': 'Anmelden',
    'auth.logout': 'Abmelden',
    'auth.signup': 'Registrieren',
    'auth.email': 'E-Mail',
    'auth.password': 'Passwort',
    'common.add': 'HinzufÃ¼gen',
    'common.edit': 'Bearbeiten',
    'common.delete': 'LÃ¶schen',
    'common.save': 'Speichern',
    'common.cancel': 'Abbrechen',
    'common.search': 'Suchen',
    'common.filter': 'Filtern',
    'common.export': 'Exportieren',
    'common.import': 'Importieren',
    'common.loading': 'Laden...',
    'common.noData': 'Keine Daten verfÃ¼gbar',
    'product.name': 'Produktname',
    'product.sku': 'SKU',
    'product.price': 'Preis',
    'product.cost': 'Kosten',
    'product.stock': 'Bestand',
    'product.category': 'Kategorie',
    'product.addProduct': 'Produkt HinzufÃ¼gen',
    'product.editProduct': 'Produkt Bearbeiten',
    'sale.recordSale': 'Verkauf Erfassen',
    'sale.customer': 'Kunde',
    'sale.total': 'Gesamt',
    'sale.date': 'Datum',
    'dashboard.totalRevenue': 'Gesamtumsatz',
    'dashboard.totalSales': 'GesamtverkÃ¤ufe',
    'dashboard.lowStock': 'Niedrige LagerbestÃ¤nde',
    'dashboard.outOfStock': 'Nicht VorrÃ¤tig',
  },
  zh: {
    'app.title': 'åº“å­˜ç®¡ç†ç³»ç»Ÿ',
    'nav.dashboard': 'ä»ªè¡¨æ¿',
    'nav.products': 'äº§å“',
    'nav.sales': 'é”€å”®',
    'nav.returns': 'é€€è´§',
    'nav.reports': 'æŠ¥å‘Š',
    'nav.advancedReports': 'é«˜çº§æŠ¥å‘Š',
    'nav.sellers': 'é”€å”®æŠ¥å‘Š',
    'nav.users': 'ç”¨æˆ·',
    'nav.mobile': 'ç§»åŠ¨åŒæ­¥',
    'nav.settings': 'è®¾ç½®',
    'nav.notifications': 'é€šçŸ¥',
    'auth.login': 'ç™»å½•',
    'auth.logout': 'ç™»å‡º',
    'auth.signup': 'æ³¨å†Œ',
    'auth.email': 'ç”µå­é‚®ä»¶',
    'auth.password': 'å¯†ç ',
    'common.add': 'æ·»åŠ ',
    'common.edit': 'ç¼–è¾‘',
    'common.delete': 'åˆ é™¤',
    'common.save': 'ä¿å­˜',
    'common.cancel': 'å–æ¶ˆ',
    'common.search': 'æœç´¢',
    'common.filter': 'ç­›é€‰',
    'common.export': 'å¯¼å‡º',
    'common.import': 'å¯¼å…¥',
    'common.loading': 'åŠ è½½ä¸­...',
    'common.noData': 'æ— æ•°æ®',
    'product.name': 'äº§å“åç§°',
    'product.sku': 'SKU',
    'product.price': 'ä»·æ ¼',
    'product.cost': 'æˆæœ¬',
    'product.stock': 'åº“å­˜',
    'product.category': 'ç±»åˆ«',
    'product.addProduct': 'æ·»åŠ äº§å“',
    'product.editProduct': 'ç¼–è¾‘äº§å“',
    'sale.recordSale': 'è®°å½•é”€å”®',
    'sale.customer': 'å®¢æˆ·',
    'sale.total': 'æ€»è®¡',
    'sale.date': 'æ—¥æœŸ',
    'dashboard.totalRevenue': 'æ€»æ”¶å…¥',
    'dashboard.totalSales': 'æ€»é”€å”®é¢',
    'dashboard.lowStock': 'ä½åº“å­˜å•†å“',
    'dashboard.outOfStock': 'ç¼ºè´§',
  },
  ar: {
    'app.title': 'Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',
    'nav.dashboard': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
    'nav.products': 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
    'nav.sales': 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',
    'nav.returns': 'Ø§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª',
    'nav.reports': 'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±',
    'nav.advancedReports': 'ØªÙ‚Ø§Ø±ÙŠØ± Ù…ØªÙ‚Ø¯Ù…Ø©',
    'nav.sellers': 'ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†',
    'nav.users': 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†',
    'nav.mobile': 'Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø©',
    'nav.settings': 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
    'nav.notifications': 'Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',
    'auth.login': 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',
    'auth.logout': 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',
    'auth.signup': 'Ø§Ù„ØªØ³Ø¬ÙŠÙ„',
    'auth.email': 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
    'auth.password': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
    'common.add': 'Ø¥Ø¶Ø§ÙØ©',
    'common.edit': 'ØªØ¹Ø¯ÙŠÙ„',
    'common.delete': 'Ø­Ø°Ù',
    'common.save': 'Ø­ÙØ¸',
    'common.cancel': 'Ø¥Ù„ØºØ§Ø¡',
    'common.search': 'Ø¨Ø­Ø«',
    'common.filter': 'ØªØµÙÙŠØ©',
    'common.export': 'ØªØµØ¯ÙŠØ±',
    'common.import': 'Ø§Ø³ØªÙŠØ±Ø§Ø¯',
    'common.loading': 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
    'common.noData': 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª',
    'product.name': 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬',
    'product.sku': 'Ø±Ù…Ø² SKU',
    'product.price': 'Ø§Ù„Ø³Ø¹Ø±',
    'product.cost': 'Ø§Ù„ØªÙƒÙ„ÙØ©',
    'product.stock': 'Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',
    'product.category': 'Ø§Ù„ÙØ¦Ø©',
    'product.addProduct': 'Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬',
    'product.editProduct': 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬',
    'sale.recordSale': 'ØªØ³Ø¬ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø¨ÙŠØ¹',
    'sale.customer': 'Ø§Ù„Ø¹Ù…ÙŠÙ„',
    'sale.total': 'Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹',
    'sale.date': 'Ø§Ù„ØªØ§Ø±ÙŠØ®',
    'dashboard.totalRevenue': 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',
    'dashboard.totalSales': 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',
    'dashboard.lowStock': 'Ø¹Ù†Ø§ØµØ± Ù…Ù†Ø®ÙØ¶Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',
    'dashboard.outOfStock': 'Ù†ÙØ° Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',
  },
  ku: {
    'app.title': 'Ø³ÛŒØ³ØªÛ•Ù…ÛŒ Ø¨Û•Ú•ÛÙˆÛ•Ø¨Ø±Ø¯Ù†ÛŒ Ú©Û†Ú¯Ø§',
    'nav.dashboard': 'Ø¯Ø§Ø´Ø¨Û†Ø±Ø¯',
    'nav.products': 'Ù¾Ø§Ø±Ú†Û•Ú©Ø§Ù†',
    'nav.sales': 'ÙØ±Û†Ø´ØªÙ†',
    'nav.returns': 'Ú¯Û•Ú•Ø§Ù†Ø¯Ù†Û•ÙˆÛ•',
    'nav.reports': 'Ú•Ø§Ù¾Û†Ø±ØªÛ•Ú©Ø§Ù†',
    'nav.advancedReports': 'Ú•Ø§Ù¾Û†Ø±ØªÛŒ Ù¾ÛØ´Ú©Û•ÙˆØªÙˆÙˆ',
    'nav.sellers': 'Ú•Ø§Ù¾Û†Ø±ØªÛŒ ÙØ±Û†Ø´ÛŒØ§Ø±Ø§Ù†',
    'nav.users': 'Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Û•Ø±Ø§Ù†',
    'nav.mobile': 'Ù‡Ø§ÙˆÚ©Ø§ØªÚ©Ø±Ø¯Ù†ÛŒ Ù…Û†Ø¨Ø§ÛŒÙ„',
    'nav.settings': 'Ú•ÛÚ©Ø®Ø³ØªÙ†Û•Ú©Ø§Ù†',
    'nav.notifications': 'Ø¦Ø§Ú¯Ø§Ø¯Ø§Ø±Ú©Ø±Ø¯Ù†Û•ÙˆÛ•Ú©Ø§Ù†',
    'auth.login': 'Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•',
    'auth.logout': 'Ú†ÙˆÙˆÙ†Û•Ø¯Û•Ø±Û•ÙˆÛ•',
    'auth.signup': 'ØªÛ†Ù…Ø§Ø±Ú©Ø±Ø¯Ù†',
    'auth.email': 'Ø¦ÛŒÙ…Û•ÛŒÚµ',
    'auth.password': 'ÙˆØ´Û•ÛŒ Ù†Ù‡ÛÙ†ÛŒ',
    'common.add': 'Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†',
    'common.edit': 'Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†',
    'common.delete': 'Ø³Ú•ÛŒÙ†Û•ÙˆÛ•',
    'common.save': 'Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø¯Ù†',
    'common.cancel': 'Ù‡Û•ÚµÙˆÛ•Ø´Ø§Ù†Ø¯Ù†Û•ÙˆÛ•',
    'common.search': 'Ú¯Û•Ú•Ø§Ù†',
    'common.filter': 'Ù¾Ø§ÚµØ§ÙˆØªÙ†',
    'common.export': 'Ù‡Û•Ù†Ø§Ø±Ø¯Û•Ú©Ø±Ø¯Ù†',
    'common.import': 'Ù‡Ø§ÙˆØ±Ø¯Û•Ú©Ø±Ø¯Ù†',
    'common.loading': 'Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†...',
    'common.noData': 'Ù‡ÛŒÚ† Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛ•Ú© Ù†ÛŒÛŒÛ•',
    'product.name': 'Ù†Ø§ÙˆÛŒ Ø¨Û•Ø±Ù‡Û•Ù…',
    'product.sku': 'Ú©Û†Ø¯ÛŒ Ø¨Û•Ø±Ù‡Û•Ù…',
    'product.price': 'Ù†Ø±Ø®',
    'product.cost': 'ØªÛÚ†ÙˆÙˆÙ†',
    'product.stock': 'Ú©Û†Ú¯Ø§',
    'product.category': 'Ø¬Û†Ø±',
    'product.addProduct': 'Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¨Û•Ø±Ù‡Û•Ù…',
    'product.editProduct': 'Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Ø¨Û•Ø±Ù‡Û•Ù…',
    'sale.recordSale': 'ØªÛ†Ù…Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ ÙØ±Û†Ø´ØªÙ†',
    'sale.customer': 'Ú©Ú•ÛŒØ§Ø±',
    'sale.total': 'Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ',
    'sale.date': 'Ø¨Û•Ø±ÙˆØ§Ø±',
    'dashboard.totalRevenue': 'Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ Ø¯Ø§Ù‡Ø§Øª',
    'dashboard.totalSales': 'Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ ÙØ±Û†Ø´ØªÙ†',
    'dashboard.lowStock': 'Ú©Û†Ú¯Ø§ÛŒ Ú©Û•Ù…',
    'dashboard.outOfStock': 'Ú©Û†Ú¯Ø§ Ø¨Û•ØªØ§ÚµÛ•',
  },
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>(() => {
    const saved = localStorage.getItem('language');
    return (saved as Language) || 'en';
  });

  useEffect(() => {
    localStorage.setItem('language', language);
    document.documentElement.lang = language;
    document.documentElement.dir = (language === 'ar' || language === 'ku') ? 'rtl' : 'ltr';
  }, [language]);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
  };

  const t = (key: string): string => {
    return translations[language][key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
}

export const languages: { code: Language; name: string; flag: string }[] = [
  { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
  { code: 'es', name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },
  { code: 'fr', name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
  { code: 'de', name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' },
  { code: 'zh', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
  { code: 'ar', name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', flag: 'ğŸ‡¸ğŸ‡¦' },
  { code: 'ku', name: 'Ú©ÙˆØ±Ø¯ÛŒ', flag: 'ğŸŸ¥ğŸŸ©' },
];
